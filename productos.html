<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Productos Level-Up Gamer</title>
    <link rel="stylesheet" href="CSS/estilos.css" />

</head>
<body>
    <header>
        <h1>Level Up Gamer</h1>
        <nav class="menu">
            <a href="index.html">Inicio</a> | 
            <a href="productos.html">Productos</a> | 
            <a href="gestionUsuario.html">Usuario</a>|
            <a href="productoDescuento.html">Canjea Productos</a> |
            <a href="canje.html">Referidos</a> |
            <a href="blog.html">Blog</a>
        </nav>
    </header>

    <section class="extracto">
        <h2>Cat√°logo de Productos</h2>
        <label for="filtro-categoria">Filtrar por categor√≠a:</label>
        <select id="filtro-categoria">
            <option value="todos">Todos</option>
            <option value="consolas">Consolas</option>
            <option value="accesorios">Accesorios</option>
            <option value="computadores-gamers">Computadores Gamers</option>
            <option value="sillas-gamers">Sillas Gamers</option>
            <option value="juegos-de-mesa">Juegos de mesa</option>
            <option value="mouse">Mouse</option>
            <option value="mousepad">Mousepad</option>
            <option value="poleras-personalizadas">Poleras Personalizadas</option>
        </select>
        <label for="filtro-orden">Ordenar por:</label>
    <select id="filtro-orden">
        <option value="default">Por defecto</option>
        <option value="precio-asc">Precio: menor a mayor</option>
        <option value="precio-desc">Precio: mayor a menor</option>
        <option value="az">Nombre: A-Z</option>
        <option value="za">Nombre: Z-A</option>
    </select>

        <div class="productos-lista" id="catalogo"></div>
    </section>

    <section id="carrito" class="extracto">
        <h2>üõí Carrito de Compras</h2>
        <ul id="lista-carrito"></ul>
        <p id="total"></p>
    </section>

    <div id="modal-detalle" class="modal-detalle" style="display:none;">
        <div class="modal-contenido">
            <span class="modal-cerrar" id="cerrar-modal">&times;</span>
            <h2 id="modal-nombre"></h2>
            <img id="modal-img" src="" alt="" style="max-width:180px; margin-bottom:10px;" />
            <p id="modal-descripcion"></p>
            <div id="modal-rese√±as">
                <h3>Rese√±as</h3>
                <ul id="modal-lista-rese√±as"></ul>
            </div>
            <div id="form-rese√±a" style="margin-top:20px; display:none;">
                <h4>Deja tu rese√±a</h4>
                <textarea id="texto-rese√±a" rows="2" maxlength="120" placeholder="Escribe tu opini√≥n..." style="width:95%;"></textarea>
                <div id="estrellas-rese√±a" style="font-size:1.5em; margin:8px 0;">
                    <span data-star="1">‚òÜ</span>
                    <span data-star="2">‚òÜ</span>
                    <span data-star="3">‚òÜ</span>
                    <span data-star="4">‚òÜ</span>
                    <span data-star="5">‚òÜ</span>
                </div>
                <button id="enviar-rese√±a">Enviar rese√±a</button>
            </div>
                    <button id="btn-rese√±ar" style="margin-top:10px;">Dejar rese√±a</button>
                    <div id="modal-compartir" style="margin-top:15px; text-align:center;">
                        <h4>Compartir este producto</h4>
                        <button id="share-facebook" class="btn-share fb">üìò Facebook</button>
                        <button id="share-twitter" class="btn-share tw">üê¶ Twitter</button>
                        <button id="share-whatsapp" class="btn-share wa">üí¨ WhatsApp</button>
            </div>

            
        </div>
    </div>

    <script>
    const productos = [
  {
    nombre: "PlayStation 5",
    precio: 650000,
    categoria: "consolas",
    img: "images/ps5.jpg",
    descripcion: "La nueva generaci√≥n de consolas PlayStation.",
    descripcionLarga: "La consola de √∫ltima generaci√≥n de Sony, que ofrece gr√°ficos impresionantes y tiempos de carga ultrarr√°pidos para una experiencia de juego inmersiva.", // larga (modal)
    rese√±as: [ { texto: "¬°Incre√≠ble potencia!", estrellas: 5 }, { texto: "La mejor consola de Sony.", estrellas: 5 } ]
  },
  {
    nombre: "Asus ROG Strix",
    precio: 1200000,
    categoria: "computadores-gamers",
    img: "images/asus-rog-strix.jpg",
    descripcion: "Notebook gamer de alto rendimiento.",
    descripcionLarga: "PC Gamer ASUS ROG Strix: un potente equipo dise√±ado para los gamers m√°s exigentes, equipado con los √∫ltimos componentes para ofrecer un rendimiento excepcional en cualquier juego.",
    rese√±as: [ { texto: "Perfecto para gaming y trabajo.", estrellas: 5 }, { texto: "Excelente calidad de construcci√≥n.", estrellas: 4 } ]
  },
  {
    nombre: "Carcassonne",
    precio: 25000,
    categoria: "juegos-de-mesa",
    img: "images/carcassonne.png",
    descripcion: "Juego de mesa de estrategia y ciudades.",
    descripcionLarga: "Un juego de colocaci√≥n de fichas donde los jugadores construyen el paisaje alrededor de la fortaleza medieval de Carcassonne. Ideal para 2-5 jugadores y f√°cil de aprender.",
    rese√±as: [ { texto: "Muy entretenido para toda la familia.", estrellas: 5 }, { texto: "F√°cil de aprender.", estrellas: 4 } ]
  },
  {
    nombre: "Catan",
    precio: 35000,
    categoria: "juegos-de-mesa",
    img: "images/catan.png",
    descripcion: "El cl√°sico de estrategia y comercio.",
    descripcionLarga: "Un cl√°sico juego de estrategia donde los jugadores compiten por colonizar y expandirse en la isla de Catan. Ideal para 3-4 jugadores y perfecto para noches de juego en familia o con amigos.",
    rese√±as: [ { texto: "Ideal para jugar con amigos.", estrellas: 5 }, { texto: "Nunca aburre.", estrellas: 4 } ]
  },
  {
    nombre: "HyperX Cloud II",
    precio: 69000,
    categoria: "accesorios",
    img: "images/hyperx-cloud2.jpg",
    descripcion: "Auriculares gamer con gran sonido.",
    descripcionLarga: "Auriculares Gamer HyperX Cloud II: proporcionan un sonido envolvente de calidad con un micr√≥fono desmontable y almohadillas de espuma viscoel√°stica para mayor comodidad durante largas sesiones de juego.",
    rese√±as: [ { texto: "Sonido espectacular.", estrellas: 5 }, { texto: "Muy c√≥modos para largas sesiones.", estrellas: 5 } ]
  },
  {
    nombre: "Logitech G502",
    precio: 45000,
    categoria: "mouse",
    img: "images/logitech-g502.jpg",
    descripcion: "Mouse gamer de alta precisi√≥n.",
    descripcionLarga: "Mouse Gamer Logitech G502 HERO: con sensor de alta precisi√≥n y botones personalizables, este mouse es ideal para gamers que buscan un control preciso y personalizaci√≥n.",
    rese√±as: [ { texto: "Muy c√≥modo.", estrellas: 5 }, { texto: "Excelente para shooters.", estrellas: 4 } ]
  },
  {
    nombre: "Polera Personalizada",
    precio: 18000,
    categoria: "poleras-personalizadas",
    img: "images/polera-personalizada.png",
    descripcion: "Personaliza tu polera con tu tag.",
    descripcionLarga: "Polera Gamer Personalizada 'Level-Up': una camiseta c√≥moda y estilizada, con la posibilidad de personalizarla con tu gamer tag o dise√±o favorito.",
    rese√±as: [ { texto: "¬°Me encant√≥ el dise√±o!", estrellas: 5 }, { texto: "Buena calidad.", estrellas: 4 } ]
  },
  {
    nombre: "Razer Goliathus",
    precio: 22000,
    categoria: "mousepad",
    img: "images/razer-goliathus.jpg",
    descripcion: "Mousepad amplio para precisi√≥n.",
    descripcionLarga: "Mousepad Razer Goliathus Extended Chroma: ofrece un √°rea de juego amplia con iluminaci√≥n RGB personalizable, asegurando una superficie suave y uniforme para el movimiento del mouse.",
    rese√±as: [ { texto: "Colores vibrantes.", estrellas: 5 }, { texto: "Muy espacioso.", estrellas: 4 } ]
  },
  {
    nombre: "Secretlab Titan",
    precio: 350000,
    categoria: "sillas-gamers",
    img: "images/secretlab-titan.jpg",
    descripcion: "Silla gamer premium y ergon√≥mica.",
    descripcionLarga: "Silla Gamer Secretlab Titan: dise√±ada para el m√°ximo confort, esta silla ofrece un soporte ergon√≥mico y personalizaci√≥n ajustable para sesiones de juego prolongadas.",
    rese√±as: [ { texto: "La mejor silla que he tenido.", estrellas: 5 }, { texto: "Muy ergon√≥mica.", estrellas: 5 } ]
  },
  {
    nombre: "Xbox Controller",
    precio: 55000,
    categoria: "accesorios",
    img: "images/xbox-controller.jpg",
    descripcion: "Control inal√°mbrico para Xbox y PC.",
    descripcionLarga: "Controlador Inal√°mbrico Xbox Series X: ofrece una experiencia de juego c√≥moda con botones mapeables y una respuesta t√°ctil mejorada. Compatible con consolas Xbox y PC.",
    rese√±as: [ { texto: "Excelente respuesta.", estrellas: 5 }, { texto: "Muy c√≥modo en las manos.", estrellas: 4 } ]
  },
  {
    nombre: "Soporte T√©cnico",
    precio: 0,
    categoria: "servicio-tecnico",
    img: "images/servicio-tecnico.jpg",
    descripcion: "Chatea con nuestro soporte por WhatsApp.",
    descripcionLarga: "¬øTienes problemas con tu producto? Haz clic en el bot√≥n para chatear con nuestro soporte t√©cnico por WhatsApp.",
    rese√±as: [ { texto: "Me ayudaron r√°pido y resolvieron mi problema.", estrellas: 5 } ],
    soporte: true
  }
];



    const currentUser = JSON.parse(localStorage.getItem("currentUser")) || {};
    const descuento = currentUser.discount || 0;


    function renderCatalogo(filtro = "todos", orden = "default") {
        const catalogoDiv = document.getElementById("catalogo");
        catalogoDiv.innerHTML = "";
        let productosFiltrados = productos.filter(producto => 
            filtro === "todos" || producto.categoria === filtro
        );
        if (orden === "precio-asc") {
            productosFiltrados.sort((a, b) => a.precio - b.precio);
        } else if (orden === "precio-desc") {
            productosFiltrados.sort((a, b) => b.precio - a.precio);
        } else if (orden === "az") {
            productosFiltrados.sort((a, b) => a.nombre.localeCompare(b.nombre));
        } else if (orden === "za") {
            productosFiltrados.sort((a, b) => b.nombre.localeCompare(a.nombre));
        }

        productosFiltrados.forEach((producto, idx) => {
            let precioFinal = producto.precio;
            let precioHTML = `<span class="precio-descuento">$${producto.precio}</span>`;
            if (descuento > 0) {
                precioFinal = Math.round(producto.precio * (1 - descuento / 100));
                precioHTML = `<span class="precio-original">$${producto.precio}</span> 
                              <span class="precio-descuento">$${precioFinal}</span> 
                              <span class="descuento-label">(-${descuento}%)</span>`;
            }

            const estrellasProm = producto.rese√±as.length
                ? Math.round(producto.rese√±as.reduce((a, r) => a + r.estrellas, 0) / producto.rese√±as.length)
                : 0;
            let estrellasHTML = "";
            for (let i = 0; i < 5; i++) {
                estrellasHTML += i < estrellasProm ? "‚òÖ" : "‚òÜ";
            }
            let botonHTML = '';
            if (producto.soporte) {
                botonHTML = `<a href="https://wa.me/56949623132?text=Hola,%20necesito%20soporte%20t√©cnico%20con%20mi%20producto%20Level-Up%20Gamer"
                    target="_blank"
                    style="display:inline-block; background:#25D366; color:#fff; padding:8px 16px; border-radius:8px; font-size:16px; text-decoration:none; font-weight:bold;">
                    üí¨ Chatear con Soporte T√©cnico
                </a>`;
            } else {
                botonHTML = `<button onclick="agregarAlCarrito('${producto.nombre}', ${precioFinal})">Agregar al carrito</button>`;
            }
            catalogoDiv.innerHTML += `
                <div class="producto" 
                    data-categoria="${producto.categoria}"
                    data-nombre="${producto.nombre}"
                    data-img="${producto.img}"
                    data-descripcion="${producto.descripcion}"
                    data-rese√±as='${JSON.stringify(producto.rese√±as)}'>
                    ${
                        producto.soporte
                        ? `
                            <h3>${producto.nombre}</h3>
                            <p>${producto.descripcion}</p>
                            ${botonHTML}
                        `
                        : `
                            <img src="${producto.img}" alt="${producto.nombre}">
                            <h3>${producto.nombre}</h3>
                            <div class="estrellas">${estrellasHTML}</div>
                            <p>${producto.descripcion}</p>
                            <p>Precio: ${precioHTML}</p>
                            ${botonHTML}
                        `
                    }
                </div>
            `;
        });


        document.querySelectorAll('.producto').forEach(producto => {
            producto.addEventListener('click', function(e) {
                document.getElementById('modal-detalle').style.display = 'block';
                document.getElementById('modal-nombre').textContent = producto.getAttribute('data-nombre');
                document.getElementById('modal-img').src = producto.getAttribute('data-img');
                document.getElementById('modal-img').alt = producto.getAttribute('data-nombre');
                document.getElementById('modal-descripcion').innerHTML = producto.getAttribute('data-descripcion');

                const rese√±as = JSON.parse(producto.getAttribute('data-rese√±as') || "[]");
                const listaRese√±as = document.getElementById('modal-lista-rese√±as');
                listaRese√±as.innerHTML = "";
                rese√±as.forEach(r => {
                    const li = document.createElement('li');
                    li.innerHTML = `<span class="estrellas">${"‚òÖ".repeat(r.estrellas)}${"‚òÜ".repeat(5 - r.estrellas)}</span> ${r.texto}`;
                    listaRese√±as.appendChild(li);
                });
            });


            producto.querySelector('button').addEventListener('click', function(e) {
                e.stopPropagation();
            });
        });
    }


    const filtroCategoria = document.getElementById('filtro-categoria');
    const filtroOrden = document.getElementById('filtro-orden');

    function actualizarCatalogo() {
        renderCatalogo(filtroCategoria.value, filtroOrden.value);}
        document.getElementById('modal-detalle').style.display = 'none';
        
    filtroCategoria.addEventListener('change', actualizarCatalogo);
    filtroOrden.addEventListener('change', actualizarCatalogo);
    


    document.getElementById('cerrar-modal').onclick = function() {
        document.getElementById('modal-detalle').style.display = 'none';
    };


    window.onclick = function(event) {
        const modal = document.getElementById('modal-detalle');
        if (event.target === modal) {
            modal.style.display = 'none';
        }
    };


    function agregarAlCarrito(nombre, precio) {
        alert(`Agregaste ${nombre} por $${precio} al carrito.`);
        
    }


    renderCatalogo();
    </script>
    <script src="scriptProductos.js"></script>
</body>
</html>